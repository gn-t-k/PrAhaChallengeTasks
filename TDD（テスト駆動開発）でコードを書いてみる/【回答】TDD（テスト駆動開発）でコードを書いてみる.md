# TDD（テスト駆動開発）でコードを書いてみる

## 課題1

### TDDのメリットとデメリット

#### メリット

- ユニットテストが充実する
- 機械的にコードを書ける
- すでに実装した機能を壊していないか確認しながら開発ができる
- テストしやすいようなコンポーネントを書くようになり、低結合・高凝集なコンポーネントができやすくなる

#### デメリット

- 実装だけを書く場合の開発と比べて、開発初期の開発速度は遅くなる
- テスティングライブラリにある程度習熟したメンバーで開発を進めないと効率が悪くなる

### TDDの用語の説明

#### 三角測量

テストがたまたま通過したという状況を防ぐために、2つ以上のパターンをテストすることで実装を一般化する手法。

例として、受け取った数値の配列を総和を返す関数のテストと実装を示す。

```typescript
// テスト
expect(add([1, 3])).toEqual(4);
// 実装
const add = (numbers: number[]): number => 4;
```

この実装だと、何を渡しても4が返ってくるため、実装としては不適切。そこで、2つ以上のパターンをテストすることで実装を一般化する。

```typescript
// テスト
expect(add([1, 3])).toEqual(4);
expect(add([1, 2])).toEqual(3); // テストが落ちる
// 実装
const add = (numbers: number[]): number => 4;
```

テストが落ちるため、実装を修正する。

```typescript
// テスト
expect(add([1, 3])).toEqual(4);
expect(add([1, 2])).toEqual(3); // テストが通る
// 実装
const add = (numbers: number[]): number => numbers.reduce((acc, cur) => acc + cur);
```

以上が三角測量の手順の一例である。

#### レッド・グリーン・リファクタリング

TDDにおける作業手順を表した言葉。TDDでは以下の3つの作業を繰り返して開発をすすめる。

- レッド … まず実装のコードを書かずテストのみ書くことで、テストが落ちる状態を作る
- グリーン … 重複などを気にせず、とりあえず用意したテストが通るように実装のコードを書く
- リファクタリング … グリーンの段階で書いたコードの重複を取り除くなどする（テストが落ちないようにする）

#### 仮実装

まずは関数の返り値にベタ書きの値を使うことで、いったんテストを通すための実装をすること。まずベタ書きの値を返すようにすることで、コードを段階的に実装するアプローチを取ることができる。

## 課題2

実装済み。下記の操作で動作確認。

```shell
yarn install --frozen-lockfile
yarn test
```
