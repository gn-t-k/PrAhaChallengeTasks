# インデックスを理解する

データベースの分野における「インデックス」について調査した。

## インデックスとは

インデックスとは、データベースの表への処理を高速化するためのデータ構造のこと。表の中の1つ以上の列を対象に索引（インデックス）を作成することで、レコードへのアクセス効率を高めることができる。

### インデックスの使い方

以下のようなクエリでインデックスを作成することができる。

```sql
CREATE INDEX インデックスの名前 ON テーブルの名前(カラムの名前)
```

以下のようなクエリでインデックスを削除することができる。

```sql
DROP INDEX インデックスの名前
```

### インデックスの仕組み

インデックスは、検索するレコードを識別するデータの項目とその項目へのポインタで構成されている。B-Treeなどの検索しやすいデータ構造でインデックスを作成することによって、データを高速に検索することができる。

## インデックスを利用する際の注意点

データによって、インデックスを作成すべきものとそうでないものがある。

### カーディナリティ

カーディナリティは、値のばらつき具合を表す指標のこと。例えば値が0か1の2種類しか入らないカラムであればカーディナリティは2で低く、顧客番号を扱うようなカラムであれば入る可能性がある値はテーブルのレコード数よりも多く、カーディナリティは高い。

### 選択率

選択率は、`カーディナリティ / 総データ件数`で計算できる。

インデックスは、選択率が高い列に作成するべきである。選択率が低いカラムにインデックスを作成しても、インデックスによって絞り込めるデータの数が少ないため、インデックスを利用してもあまり高い効果が得られないため。

### インデックスを作成しないほうがよいケース

slow query log, カバリングインデックス
