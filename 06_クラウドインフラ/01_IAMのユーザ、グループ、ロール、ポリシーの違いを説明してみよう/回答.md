# IAMのユーザ、グループ、ロール、ポリシーの違いを説明してみよう

## 課題1

### ユーザーとは

IAMユーザーは、AWSとやりとりをするためのユーザーまたはアプリケーションを表すエンティティ。IAMユーザーは、「ユーザー名」と「認証情報」で構成される。ユーザー名はマネジメントコンソールに表示される名前のことで、認証情報はIAMユーザーのパスワードやアクセスキーなどのこと。

### グループとは

IAMグループは、IAMユーザーをまとめてグループ化して管理するためのエンティティ。IAMグループを利用することで、複数のユーザーに効率よくアクセス許可を設定することができる。

- IAMグループには複数のユーザーを設定することができる
- IAMユーザーは複数のIAMグループに所属することができる
- IAMグループにはIAMユーザーのみを含めることができる（IAMグループを含めてネストするようなことはできない）

### ポリシーとは

IAMポリシーは、IAMユーザー/IAMグループ/IAMロール（後述）に対して、AWSリソースへのアクセス許可を定義するエンティティ。

JSON形式のアクセスポリシー言語以下の方法でアクセス条件を記述できる。また、以下の方法で作成することができる。

- AWS管理ポリシーをコピーする
- Policy Generatorによる対話形式で作成する
- 独自のポリシーを作成する

### ロールとは

IAMロールは、IAMユーザー/IAMグループ/AWSリソースに割り当てることができるエンティティ。IAMユーザー/IAMグループ/AWSリソースとIAMポリシーとを紐つけることで、それらに対してアクセス権限を設定できる。

たとえばEC2インスタンスに他のAWSリソースへのアクセスが可能になるロールを設定すると、EC2内でAWS CLIコマンドを利用してS3にアクセスしたりLambdaを実行したりできるようになる。

## 課題2

### ユーザーを作成してみる

作った。（？）

ルートユーザーでのアクセスが推奨されていない理由 … ルートユーザーに付与されたアクセス権限は制限できず、セキュリティ上の問題があり、日常的に仕様すべきではないため。

### グループを作成してみる

作った。（？）

ポリシーを直接ユーザーに付与するか、グループに付与してユーザーを所属させるか … グループに付与してユーザーを所属。グループに付与してユーザーを所属させたほうが、複数ユーザーを管理したりしやすいため。

### EC2からS3にアクセスできるようにポリシー/ロールを作成・設定してみる

- ec2インスタンスを建てる
- s3バケットを作成して、オブジェクトをアップロードする
- 以下のようにIAMポリシーを作成し、それを紐付けたロールを作成、ec2に割り当てる

```json
{
    "Version": "2012-10-17",
    "Statement": [
        {
            "Effect": "Allow",
            "Action": [
                "s3:listBucket"
            ],
            "Resource": [
                "arn:aws:s3:::バケット名"
            ]
        }
    ]
}
```

もしくはS3バケットにバケットポリシーを設定することもできる。

## 課題3

JSON形式のアクセスポリシーを作成する方法を3つあげてください。

<details>
  <summary>解答</summary>

- AWS管理ポリシーをコピーする
- Policy Generatorによる対話形式で作成する
- 独自のポリシーを手書きで作成する

</details>
