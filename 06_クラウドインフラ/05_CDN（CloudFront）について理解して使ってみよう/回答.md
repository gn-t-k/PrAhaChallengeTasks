# CDN(CloudFront)について理解して使ってみよう

## 課題1

### オリジンサーバー・エッジサーバー

CDNはContent Delivery Networkの略。コンテンツ（html/css/JavaScript/画像ファイルなど）を配信するサーバー（**オリジンサーバー**）からクライアントにコンテンツを直接配信するのではなく、世界中に配置されたコンテンツ配信用のサーバー（**エッジサーバー**）からクライアントにコンテンツを配信する仕組み。

### CDNを使用するメリット

CDNを使用するメリットは以下の通り。

- エッジサーバーが世界中に配置されているため、クライアントの場所に物理的に近い場所からコンテンツを直接配信することができ、コンテンツへのアクセス高速化につながる
- オリジンサーバーへのアクセスによる負荷をエッジサーバーに肩代わりさせることができるため、オリジンサーバーの負荷分散の効果がある

### ブラウザキャッシュとの比較

ブラウザにキャッシュされたデータは、データの更新や削除についてCache-Controlヘッダーなどを使って事前に設定しておかなければいけない（配信後に制御できない）が、CDNであればデータの更新や削除のタイミングをある程度制御できる。

## 課題2

画像をS3にアップロードし、S3から直接取得した場合とCloudFront経由で取得した場合とで、ブラウザから画像ファイルへのアクセスにかかった時間を計測。ブラウザキャッシュが効いてしまうことを避けるため、Chromeのシークレットモードを使用し、DevToolのNetwork機能を使って計測。

| 取得方法 | かかった時間（秒） |
|-|-|
| S3から直接取得 | 1.26 |
| CloudFront経由で取得 | 0.14 |

すごい。
